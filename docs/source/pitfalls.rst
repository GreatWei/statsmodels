Pitfalls（陷阱）
========

本页列出了使用 statsmodels 时可能出现的问题。这些可能是数据相关或统计问题，软件设计，
 "non-standard" 使用模型或出现极端情况的结果。

statsmodels 提供了一些警告和帮助程序功能来进行诊断检查，（比如，有关线性回归中错误指定检查的示例， 请参阅 `blog article
<http://jpktd.blogspot.ca/2012/01/anscombe-and-diagnostic-statistics.html>`_ 虽然涵盖范围并不全面，但是随着时间的推移会增加更多的警告和诊断功能。

尽管所有统计软件包的基本统计问题都相同，但是软件实现在处理极端或极端情况的方式上有所不同。
将报告模型可能无法使用的特殊情况，以便我们认真对待。

重复调用以拟合不同的参数
-----------------------------------------------

结果实例通常需要访问相应模型实例的属性。使用不同的参数多次拟合模型可以更改模型属性。
这意味着在重新拟合模型后，结果实例可能不再指向正确的模型属性。


因此，当我们要使用不同的拟合函数参数拟合模型时，最好的做法是创建单独的模型实例

例如，因为我们没有保留结果实例以供进一步使用而没有出现问题 ::

  mod = AR(endog)
  aic = []
  for lag in range(1,11):
      res = mod.fit(maxlag=lag)
      aic.append(res.aic)


但是，当我们要保留两个不同的估计结果时，建议创建两个单独的模型实例。 ::

  mod1 = RLM(endog, exog)
  res1 = mod1.fit(scale_est='mad')
  mod2 = RLM(endog, exog)
  res2 = mod2.fit(scale_est=sm.robust.scale.HuberScale())


无法确定的参数
-----------------------

exog 的秩不足, 完美多重共线性
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

基于线性模型 GLS, RLM, GLM 和类似模型的模型使用广义逆。这意味着: 

+ 秩不足的矩阵不会引发错误
+ 几乎完美的多重共线性或病态设计矩阵的情况可能会产生数值不稳定的结果。如果这不是所需的行为，则用户需要手动检查矩阵的等级或条件编号。
  
注意：如果未重新缩放数据，则 statsmodels 当前在Filip的NIST基准测试情况下失败 `this blog <http://jpktd.blogspot.ca/2012/03/numerical-accuracy-in-linear-least.html>`_

极大似然估计的不完全收敛
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

在某些情况下，极大似然估计器可能不存在，参数可能是无限的或不是唯一的（例如，在具有二元内生变量的模型中，（准）分离）。
在默认设置下，如果优化算法停止而未达到收敛，则statsmodels将警告。然而，重要是要知道收敛标准有时会错误地指示收敛
（例如，如果目标函数的值收敛，而参数没有收敛），通常用户需要验证收敛。

对于二分类 Logit 和 Probit 模型，如果检测到完美预测，则 statsmodels 会引发异常。然而却没有检查完美预测的情况。

其他问题
--------------

数据变化不足
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

对于小型数据集或分类变量中的分组较小的数据，数据的变化可能不足。在这些情况下，结果可能无法确定，
或者可能会出现一些隐藏的问题。

当前唯一已知的情况是鲁棒线性模型估计可以完美拟合。对于 RLM 模型，如果残差等于零，那么它不会引起异常，
但是具有这种完美拟合可以在某些结果(scale=0 and 0/0 division) (issue #55).
